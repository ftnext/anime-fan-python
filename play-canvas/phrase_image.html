<!DOCTYPE html>

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@900&display=swap"
    rel="stylesheet"
  />
</head>

<body>
  <input id="sentenceInput" />
  <button id="drawCanvas">Draw</button>
  <canvas id="canvas"></canvas>

  <script>
    const sentenceInput = document.getElementById("sentenceInput");
    const drawButton = document.getElementById("drawCanvas");

    drawButton.onclick = () => {
      const sentence = sentenceInput.value;
      drawTextOnCanvas(sentence);
    };

    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    canvas.width = 1280;
    canvas.height = 720;

    function drawTextOnCanvas(sentence) {
      ctx.fillStyle = "yellow";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "aqua";
      const length = Math.max(sentence.length, 5);
      const fontSize = (canvas.width - 60) / ((length ?? 7) + 0.5);
      ctx.font = `bold ${fontSize}px 'Noto Sans JP'`;
      const textWidth = ctx.measureText(sentence).width;
      const width = (canvas.width - textWidth) / 2;
      const height = (canvas.height + fontSize) / 2;
      ctx.fillText(sentence, width, height);
    }
  </script>
</body>
